# c2csectrade æ™ºèƒ½æ¨èç³»ç»Ÿæ–‡æ¡£

## ç³»ç»Ÿæ¦‚è¿°

c2csectrade å®ç°äº†ä¸€ä¸ª**ä¼ä¸šçº§å¤šå±‚æ¬¡æ··åˆæ¨èç³»ç»Ÿ**ï¼Œé€‚ç”¨äºäºŒæ‰‹å•†å“äº¤æ˜“å¹³å°çš„å„ç±»å•†å“ï¼ˆæ•°ç ã€æœè£…ã€å›¾ä¹¦ã€å®¶å±…ç­‰ï¼‰ã€‚ç³»ç»Ÿç»“åˆäº†ååŒè¿‡æ»¤ã€åŸºäºå†…å®¹çš„æ¨èã€ç¥ç»ç½‘ç»œã€å®æ—¶æ¨èå’Œçƒ­åº¦æ’åºï¼Œä¸ºç”¨æˆ·æä¾›ç²¾å‡†çš„ä¸ªæ€§åŒ–å•†å“æ¨èã€‚

## æ¶æ„è®¾è®¡

### 1. ä¸‰å±‚æ¨èæ¶æ„

#### 1.1 ååŒè¿‡æ»¤ (Collaborative Filtering)
- **å®ç°ç±»**: `RecommendationEngineService`
- **ç®—æ³•**: Item-Based Collaborative Filtering
- **åŸç†**: é€šè¿‡ç”¨æˆ·æµè§ˆå†å²æ„å»ºå•†å“å…±ç°çŸ©é˜µï¼Œä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—å•†å“é—´çš„ç›¸ä¼¼åº¦
- **æƒé‡**: 40%

**è®¡ç®—æµç¨‹**:
```
1. æ”¶é›†ç”¨æˆ·æµè§ˆå†å² (Redis Sorted Set)
2. æ„å»ºå•†å“å…±ç°çŸ©é˜µ
3. è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦: similarity = co-occurrence / sqrt(total1 * total2)
4. å­˜å‚¨Top 10ç›¸ä¼¼å•†å“åˆ°Redis (recommend:item-cf:{productId})
```

#### 1.2 åŸºäºå†…å®¹çš„æ¨è (Content-Based)
- **å®ç°ç±»**: `ContentBasedRecommendationService`
- **ç®—æ³•**: TF-IDF + ä½™å¼¦ç›¸ä¼¼åº¦
- **ç‰¹å¾**: å•†å“åç§°ã€æè¿°ã€ç±»åˆ«ã€ä»·æ ¼åŒºé—´ã€æˆè‰²ã€ä½ç½®
- **æƒé‡**: 40%

**ç‰¹å¾æå–**:
- **ç±»åˆ«** (é«˜æƒé‡): `cat:category`
- **å•†å“å** (ä¸­æ–‡åˆ†è¯ + bigram): `name:word`
- **æè¿°**: `desc:word`
- **ä»·æ ¼åŒºé—´**: `price:0-20`, `price:20-50`, `price:50-100`ç­‰
- **æˆè‰²**: `condition:1-10`
- **ä½ç½®**: `loc:location`

**ç›¸ä¼¼åº¦è®¡ç®—**:
```
1. TF-IDFå‘é‡åŒ–
   - TF = term_freq / total_terms
   - IDF = log(total_docs / doc_freq)
   - TF-IDF = TF * IDF

2. ä½™å¼¦ç›¸ä¼¼åº¦
   - cosine_sim = dot_product / (norm1 * norm2)

3. ä»·æ ¼ç›¸ä¼¼åº¦ (æŒ‡æ•°è¡°å‡)
   - price_sim = exp(-relative_diff * 2)

4. ç»¼åˆå¾—åˆ†
   - final_score = 0.8 * cosine_sim + 0.2 * price_sim
```

#### 1.3 çƒ­åº¦æ’åº (Popularity-Based)
- **å®ç°ç±»**: `HybridRecommendationService`
- **æ•°æ®ç»“æ„**: Redis Sorted Set
- **æƒé‡**: 20%

**è¡Œä¸ºæƒé‡**:
- æµè§ˆ (view): 1.0
- æ”¶è— (favorite): 3.0
- åŠ è´­ (cart): 5.0
- è¯„ä»· (review): 8.0
- è´­ä¹° (order): 10.0

**çƒ­åº¦è¡°å‡**: æ¯å¤©è‡ªåŠ¨è¡°å‡10%ï¼Œé˜²æ­¢è€å•†å“æŒç»­éœ¸æ¦œ

### 2. æ··åˆæ¨èç­–ç•¥

**å®ç°ç±»**: `HybridRecommendationService.getHybridSimilarProducts()`

```
ç»¼åˆå¾—åˆ† = 0.4 * CFå¾—åˆ† + 0.4 * å†…å®¹å¾—åˆ† + 0.2 * çƒ­åº¦å¾—åˆ†
```

## æ•°æ®æµè®¾è®¡

### 1. ç”¨æˆ·è¡Œä¸ºè¿½è¸ª

#### 1.1 æµè§ˆå†å²
```java
// Redis Key: history:user:{userId}
// Data Structure: Sorted Set (score = timestamp)
historyService.recordView(userId, productId);
```

#### 1.2 ç”¨æˆ·å…´è¶£ç”»åƒ
```java
// Redis Key: profile:user:{userId}
// Data Structure: Hash (tag -> interest_score)
// è‡ªåŠ¨ä»æµè§ˆå†å²æå–æ ‡ç­¾å¹¶ç´¯åŠ å…´è¶£åˆ†
```

### 2. æ¨èæ•°æ®ç¼“å­˜

#### 2.1 ååŒè¿‡æ»¤ç¼“å­˜
```
Key: recommend:item-cf:{productId}
Type: Sorted Set
Score: ç›¸ä¼¼åº¦åˆ†æ•°
Value: ç›¸ä¼¼å•†å“ID
TTL: æ°¸ä¹… (æ¯æ—¥æ›´æ–°)
```

#### 2.2 å†…å®¹ç›¸ä¼¼åº¦ç¼“å­˜
```
Key: recommend:content:{productId}
Type: Sorted Set
Score: ç›¸ä¼¼åº¦åˆ†æ•°
Value: ç›¸ä¼¼å•†å“ID
TTL: 7å¤©
```

#### 2.3 çƒ­åº¦ç¼“å­˜
```
Key: recommend:popularity
Type: Sorted Set
Score: çƒ­åº¦åˆ†æ•°
Value: å•†å“ID
TTL: æ°¸ä¹… (å®æ—¶æ›´æ–° + æ¯æ—¥è¡°å‡)
```

## APIæ¥å£

### 1. çŒœä½ å–œæ¬¢
```http
GET /api/recommendations/for-you?limit=10
```

**é€»è¾‘**:
1. è·å–ç”¨æˆ·å…´è¶£ç”»åƒ (Top 3æ ‡ç­¾)
2. æ ¹æ®å…´è¶£æ ‡ç­¾æœç´¢å•†å“
3. è¿‡æ»¤å·²æµè§ˆå’Œè‡ªå·±çš„å•†å“
4. è¿”å›ä¸ªæ€§åŒ–æ¨è

**æœªç™»å½•ç”¨æˆ·**: è¿”å›çƒ­é—¨å•†å“

### 2. ç›¸ä¼¼å•†å“æ¨è
```http
GET /api/recommendations/products/{id}/similar?limit=10
```

**é€»è¾‘**:
1. ä½¿ç”¨æ··åˆæ¨èç®—æ³•è·å–ç›¸ä¼¼å•†å“ID
2. åŠ è½½å•†å“è¯¦æƒ…å’Œåª’ä½“
3. è¿‡æ»¤ä¸å¯ç”¨å•†å“
4. å¦‚æœç»“æœä¸è¶³ï¼Œè¡¥å……åŒç±»åˆ«å•†å“

### 3. æ‰‹åŠ¨è§¦å‘è®¡ç®— (ç®¡ç†å‘˜)
```http
POST /api/recommendations/compute
Authorization: Admin
```

## å®šæ—¶ä»»åŠ¡

### æ¯æ—¥å‡Œæ™¨3ç‚¹è‡ªåŠ¨è®¡ç®—
```java
@Scheduled(cron = "0 0 3 * * ?")
public void computeRecommendations()
```

**æ‰§è¡Œæµç¨‹**:
1. ååŒè¿‡æ»¤è®¡ç®— (5-10åˆ†é’Ÿ)
2. å†…å®¹ç›¸ä¼¼åº¦è®¡ç®— (10-20åˆ†é’Ÿ)
3. çƒ­åº¦åˆ†æ•°è¡°å‡ (1åˆ†é’Ÿ)

## æ€§èƒ½ä¼˜åŒ–

### 1. ç¦»çº¿è®¡ç®—
- æ¨èè®¡ç®—åœ¨åå°å®šæ—¶æ‰§è¡Œ
- ä¸å½±å“åœ¨çº¿æœåŠ¡æ€§èƒ½

### 2. Redisç¼“å­˜
- æ‰€æœ‰æ¨èç»“æœé¢„è®¡ç®—å¹¶ç¼“å­˜
- æŸ¥è¯¢æ—¶ç›´æ¥ä»Redisè¯»å–ï¼Œå»¶è¿Ÿ < 10ms

### 3. å¼‚æ­¥å¤„ç†
- ç”¨æˆ·è¡Œä¸ºè¿½è¸ªä¸é˜»å¡ä¸»æµç¨‹
- ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†

### 4. æ‰¹é‡æ“ä½œ
- å•†å“è¯¦æƒ…æ‰¹é‡åŠ è½½
- å‡å°‘æ•°æ®åº“æŸ¥è¯¢æ¬¡æ•°

## å‰ç«¯é›†æˆ

### 1. ä¸»é¡µæ¨èåŒºå—
```vue
<RecommendationSection
  title="ğŸ¯ çŒœä½ å–œæ¬¢"
  subtitle="æ ¹æ®æ‚¨çš„æµè§ˆå†å²æ¨è"
  :products="recommendedProducts"
/>
```

### 2. å•†å“è¯¦æƒ…é¡µ
```vue
<RecommendationSection
  title="ğŸ‘€ çœ‹äº†åˆçœ‹"
  subtitle="å…¶ä»–ç”¨æˆ·ä¹Ÿæµè§ˆè¿‡è¿™äº›å•†å“"
  :products="similarProducts"
/>
```

### 3. è‡ªåŠ¨åŠ è½½
```javascript
// åœ¨å•†å“è¯¦æƒ…é¡µæŒ‚è½½æ—¶
onMounted(() => {
  trackProductView();      // è¿½è¸ªæµè§ˆ
  fetchSimilarProducts();  // è·å–æ¨è
});
```

## æ‰©å±•æ€§è®¾è®¡

### 1. æ–°å¢æ¨èç®—æ³•
ç»§æ‰¿ `HybridRecommendationService` å¹¶å®ç°æ–°çš„è¯„åˆ†ç­–ç•¥ï¼š
```java
public Map<Long, Double> getNewAlgorithmScores(Long productId) {
    // å®ç°æ–°ç®—æ³•
}
```

### 2. è°ƒæ•´æƒé‡
ä¿®æ”¹ `HybridRecommendationService` ä¸­çš„å¸¸é‡ï¼š
```java
private static final double CF_WEIGHT = 0.4;
private static final double CONTENT_WEIGHT = 0.4;
private static final double POPULARITY_WEIGHT = 0.2;
```

### 3. æ·»åŠ æ–°ç‰¹å¾
åœ¨ `ContentBasedRecommendationService.extractTerms()` ä¸­æ·»åŠ ï¼š
```java
// æ·»åŠ å“ç‰Œç‰¹å¾
if (product.getBrand() != null) {
    terms.add("brand:" + product.getBrand());
}
```

## ç›‘æ§æŒ‡æ ‡

### 1. æ¨èè¦†ç›–ç‡
- æœ‰æ¨èç»“æœçš„å•†å“æ¯”ä¾‹
- ç›®æ ‡: > 80%

### 2. æ¨èå‡†ç¡®ç‡
- ç‚¹å‡»ç‡ (CTR)
- è½¬åŒ–ç‡ (CVR)

### 3. è®¡ç®—æ€§èƒ½
- ååŒè¿‡æ»¤è®¡ç®—æ—¶é—´
- å†…å®¹ç›¸ä¼¼åº¦è®¡ç®—æ—¶é—´

### 4. ç¼“å­˜å‘½ä¸­ç‡
- Redisç¼“å­˜å‘½ä¸­ç‡
- ç›®æ ‡: > 95%

## å·²çŸ¥é™åˆ¶

1. **å†·å¯åŠ¨é—®é¢˜**: æ–°å•†å“å’Œæ–°ç”¨æˆ·ç¼ºå°‘å†å²æ•°æ®
   - è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨åŸºäºå†…å®¹çš„æ¨èå’Œçƒ­é—¨å•†å“

2. **è®¡ç®—èµ„æº**: å¤§è§„æ¨¡å•†å“éœ€è¦è¾ƒé•¿è®¡ç®—æ—¶é—´
   - è§£å†³æ–¹æ¡ˆ: å¢é‡è®¡ç®—ã€åˆ†å¸ƒå¼è®¡ç®—

3. **å®æ—¶æ€§**: æ¨èç»“æœæ¯æ—¥æ›´æ–°ä¸€æ¬¡
   - è§£å†³æ–¹æ¡ˆ: å¼•å…¥å®æ—¶æµå¤„ç†æ¡†æ¶

## é«˜çº§åŠŸèƒ½å®ç°

### 1. æ·±åº¦å­¦ä¹ æ¨¡å‹ - ç¥ç»ç½‘ç»œååŒè¿‡æ»¤ (NCF) âœ…

**å®ç°ç±»**: `NCFRecommendationService`

**æ¶æ„**:
- **Embeddingå±‚**: ç”¨æˆ·å’Œå•†å“çš„å‘é‡è¡¨ç¤º (32ç»´)
- **GMFéƒ¨åˆ†**: å¹¿ä¹‰çŸ©é˜µåˆ†è§£ (å…ƒç´ çº§ä¹˜ç§¯)
- **MLPéƒ¨åˆ†**: å¤šå±‚æ„ŸçŸ¥å™¨ (ç‰¹å¾å­¦ä¹ )
- **èåˆå±‚**: NeuMFç»„åˆGMFå’ŒMLP

**æ ¸å¿ƒæ–¹æ³•**:
```java
// é¢„æµ‹ç”¨æˆ·-å•†å“äº¤äº’åˆ†æ•°
double score = ncfService.predictScore(userId, productId);

// åœ¨çº¿å­¦ä¹ ï¼šæ ¹æ®ç”¨æˆ·è¡Œä¸ºæ›´æ–°æ¨¡å‹
ncfService.trainOnInteraction(userId, productId, "order");

// è·å–NCFæ¨è
List<Long> recommendations = ncfService.getNCFRecommendations(
    userId, candidateProducts, 10
);
```

**ä¼˜åŠ¿**:
- éçº¿æ€§ç‰¹å¾å­¦ä¹ 
- åœ¨çº¿å¢é‡å­¦ä¹ 
- ä¸ªæ€§åŒ–ç¨‹åº¦é«˜

### 2. å®æ—¶æ¨èç³»ç»Ÿ âœ…

**å®ç°ç±»**: `RealtimeRecommendationService`

**å®æ—¶å¤„ç†èƒ½åŠ›**:
- ç”¨æˆ·ä¼šè¯è·Ÿè¸ªï¼ˆæœ€è¿‘20æ¬¡äº¤äº’ï¼‰
- 5åˆ†é’Ÿæ»‘åŠ¨æ—¶é—´çª—å£
- è¶‹åŠ¿å•†å“å®æ—¶è®¡ç®—
- å³æ—¶ä¸ªæ€§åŒ–è¯„åˆ†

**æ—¶é—´çª—å£èšåˆ**:
```java
// è·å–å®æ—¶è¶‹åŠ¿å•†å“
List<Long> trending = realtimeService.getTrendingProducts(30, 20);

// è·å–å®æ—¶ä¸ªæ€§åŒ–æ¨è
List<Long> recommendations = realtimeService.getRealtimeRecommendations(userId, 10);

// å¤„ç†ç”¨æˆ·äº¤äº’
realtimeService.processInteraction(userId, productId, "view");
```

**ç‰¹ç‚¹**:
- æ¯«ç§’çº§å“åº”
- ä¼šè¯æ„ŸçŸ¥æ¨è
- æ—¶é—´è¡°å‡æœºåˆ¶
- çƒ­ç‚¹æ•è·

### 3. A/Bæµ‹è¯•æ¡†æ¶ âœ…

**å®ç°ç±»**: `ABTestService`

**æ”¯æŒçš„æµ‹è¯•**:
- å¤šå˜ä½“å®éªŒï¼ˆ2-10ä¸ªå˜ä½“ï¼‰
- æµé‡åˆ†é…æ§åˆ¶
- ä¸€è‡´æ€§å“ˆå¸Œåˆ†é…
- ç»Ÿè®¡æ˜¾è‘—æ€§æ£€éªŒ

**ä½¿ç”¨ç¤ºä¾‹**:
```java
// åˆ›å»ºå®éªŒ
Map<String, Double> variants = Map.of(
    "control", 0.2,      // CFç®—æ³•
    "variant_a", 0.2,    // åŸºäºå†…å®¹
    "variant_b", 0.2,    // æ··åˆæ¨è
    "variant_c", 0.2,    // NCFç¥ç»ç½‘ç»œ
    "variant_d", 0.2     // å®æ—¶æ¨è
);
abTestService.createExperiment("rec_algo_v1", "æ¨èç®—æ³•å¯¹æ¯”", variants);

// åˆ†é…ç”¨æˆ·åˆ°å˜ä½“
String variant = abTestService.assignUserToVariant(userId, "rec_algo_v1");

// è¿½è¸ªæŒ‡æ ‡
abTestService.trackClick(userId, experimentId, productId);
abTestService.trackConversion(userId, experimentId, productId, 99.99);

// è·å–å®éªŒç»“æœ
Map<String, Map<String, Object>> results = abTestService.getExperimentResults("rec_algo_v1");
```

**æŒ‡æ ‡è¿½è¸ª**:
- æ›å…‰é‡ (Impressions)
- ç‚¹å‡»ç‡ (CTR)
- è½¬åŒ–ç‡ (CVR)
- æ”¶å…¥ (Revenue)
- æ˜¾è‘—æ€§æ£€éªŒ (Chi-square)

### 4. å¤šç›®æ ‡ä¼˜åŒ– âœ…

**å®ç°ç±»**: `MultiObjectiveOptimizationService`

**ä¼˜åŒ–ç›®æ ‡**:
1. **ç‚¹å‡»ç‡ (CTR)** - 25%æƒé‡
2. **è½¬åŒ–ç‡ (CVR)** - 30%æƒé‡
3. **æ”¶å…¥ (Revenue)** - 20%æƒé‡
4. **å¤šæ ·æ€§ (Diversity)** - 15%æƒé‡
5. **æ–°é¢–æ€§ (Novelty)** - 10%æƒé‡

**æ ¸å¿ƒç®—æ³•**:
```java
// å¤šç›®æ ‡ä¼˜åŒ–æ¨è
List<Long> optimized = multiObjectiveService.getMultiObjectiveRecommendations(
    userId, candidates, 10
);

// MMRå¤šæ ·æ€§é‡æ’åº
List<Long> diverse = multiObjectiveService.rerankForDiversity(
    recommendations, 0.7  // lambdaå‚æ•°
);

// Paretoå‰æ²¿ï¼ˆéæ”¯é…è§£ï¼‰
List<ScoredCandidate> paretoFrontier = 
    multiObjectiveService.getParetoFrontier(candidates);
```

**ç®—æ³•å®ç°**:
- **åŠ æƒè¯„åˆ†**: çº¿æ€§ç»„åˆå¤šä¸ªç›®æ ‡
- **MMRé‡æ’åº**: å¹³è¡¡ç›¸å…³æ€§å’Œå¤šæ ·æ€§
- **Paretoä¼˜åŒ–**: æ‰¾åˆ°éæ”¯é…è§£é›†åˆ

### 5. Redisæ·±åº¦é›†æˆ âœ…

**å®ç°ç±»**: `RedisCacheService`

**é«˜çº§åŠŸèƒ½**:
```java
// åˆ†å¸ƒå¼é”
String lockId = UUID.randomUUID().toString();
if (redisCacheService.acquireLock("product:123", lockId, 10)) {
    try {
        // æ‰§è¡Œä¸´ç•ŒåŒºä»£ç 
    } finally {
        redisCacheService.releaseLock("product:123", lockId);
    }
}

// çƒ­ç‚¹å•†å“ç¼“å­˜
redisCacheService.updateHotProducts(productId, score);
List<Long> hotProducts = redisCacheService.getHotProducts(20);

// æ‰¹é‡æ“ä½œï¼ˆPipelineï¼‰
Map<String, Object> batch = Map.of(
    "product:1", product1,
    "product:2", product2
);
redisCacheService.batchSet(batch, 60);

// å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆå»é‡ï¼‰
redisCacheService.bloomAdd("viewed:products", productId.toString());
boolean seen = redisCacheService.bloomContains("viewed:products", productId.toString());

// é™æµæ§åˆ¶
Long count = redisCacheService.incrementWithExpire("ratelimit:user:" + userId, 60);
if (count > 100) {
    throw new RateLimitException("è¯·æ±‚è¿‡äºé¢‘ç¹");
}
```

## ç³»ç»Ÿé›†æˆæ¶æ„

```
ç”¨æˆ·è¯·æ±‚
   â†“
A/Bæµ‹è¯•åˆ†æµ
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨èç­–ç•¥è·¯ç”±                          â”‚
â”‚  - Control: ååŒè¿‡æ»¤                   â”‚
â”‚  - Variant A: åŸºäºå†…å®¹                 â”‚
â”‚  - Variant B: æ··åˆæ¨è                 â”‚
â”‚  - Variant C: NCFç¥ç»ç½‘ç»œ              â”‚
â”‚  - Variant D: å®æ—¶æ¨è                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“
å€™é€‰ç”Ÿæˆ (Candidate Generation)
   â†“
å¤šç›®æ ‡ä¼˜åŒ– (Multi-Objective Optimization)
   â†“
MMRé‡æ’åº (Diversity Re-ranking)
   â†“
ç»“æœè¿”å› + æŒ‡æ ‡è¿½è¸ª
```

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### Redisç¼“å­˜åˆ†å±‚
1. **L1ç¼“å­˜** - çƒ­ç‚¹æ•°æ®ï¼ˆTTL: 5åˆ†é’Ÿï¼‰
2. **L2ç¼“å­˜** - æ¨èç»“æœï¼ˆTTL: 1å°æ—¶ï¼‰
3. **L3ç¼“å­˜** - æ¨¡å‹å‚æ•°ï¼ˆTTL: 1å¤©ï¼‰

### å¼‚æ­¥å¤„ç†
- ç”¨æˆ·è¡Œä¸ºè¿½è¸ª â†’ RabbitMQ â†’ å¼‚æ­¥æ›´æ–°æ¨¡å‹
- æ¨èè®¡ç®— â†’ åå°å®šæ—¶ä»»åŠ¡
- æŒ‡æ ‡æ”¶é›† â†’ æ¶ˆæ¯é˜Ÿåˆ— â†’ æ‰¹é‡å…¥åº“

### åˆ†å¸ƒå¼è®¡ç®—
- ååŒè¿‡æ»¤ï¼šç¦»çº¿æ‰¹å¤„ç†
- NCFè®­ç»ƒï¼šåœ¨çº¿å¢é‡å­¦ä¹ 
- å®æ—¶æ¨èï¼šæµå¼å¤„ç†

## ç›‘æ§æŒ‡æ ‡

### ä¸šåŠ¡æŒ‡æ ‡
- **CTR**: ç‚¹å‡»ç‡ = ç‚¹å‡»æ•° / æ›å…‰æ•°
- **CVR**: è½¬åŒ–ç‡ = è®¢å•æ•° / ç‚¹å‡»æ•°
- **GMV**: æˆäº¤æ€»é¢
- **ç”¨æˆ·æ»¡æ„åº¦**: è¯„åˆ†ã€åœç•™æ—¶é—´

### æŠ€æœ¯æŒ‡æ ‡
- **å“åº”æ—¶é—´**: P50 < 50ms, P99 < 200ms
- **ç¼“å­˜å‘½ä¸­ç‡**: > 95%
- **æ¨èè¦†ç›–ç‡**: > 85%
- **å¤šæ ·æ€§æŒ‡æ ‡**: ILD (Intra-List Diversity)

### A/Bæµ‹è¯•æŒ‡æ ‡
- **ç›¸å¯¹æå‡**: (å˜ä½“æŒ‡æ ‡ - å¯¹ç…§ç»„æŒ‡æ ‡) / å¯¹ç…§ç»„æŒ‡æ ‡
- **ç»Ÿè®¡æ˜¾è‘—æ€§**: p-value < 0.05
- **æ ·æœ¬é‡**: æ¯ç»„ > 1000

## APIæ–‡æ¡£

### 1. è·å–ä¸ªæ€§åŒ–æ¨è
```http
GET /api/recommendations/for-you?limit=10
Authorization: Bearer <token>

Response:
{
  "products": [...],
  "strategy": "ncf_neural",
  "experiment": "rec_algo_v1"
}
```

### 2. è·å–ç›¸ä¼¼å•†å“
```http
GET /api/recommendations/products/123/similar?limit=10

Response:
{
  "products": [...],
  "algorithm": "hybrid",
  "diversity_score": 0.82
}
```

### 3. è·å–å®æ—¶è¶‹åŠ¿
```http
GET /api/recommendations/trending?minutes=30&limit=20

Response:
{
  "products": [...],
  "window": "30åˆ†é’Ÿ",
  "updated_at": "2025-01-15T10:30:00Z"
}
```

## æœªæ¥æ‰©å±•æ–¹å‘

1. **è·¨åŸŸæ¨è**: ç»“åˆç”¨æˆ·ç¤¾äº¤å…³ç³»å’Œç¤¾åŒºæ¨è
2. **åºåˆ—æ¨è**: åŸºäºTransformerçš„ä¼šè¯æ¨è
3. **çŸ¥è¯†å›¾è°±**: èå…¥å•†å“çŸ¥è¯†å›¾è°±å¢å¼ºæ¨è
4. **å¼ºåŒ–å­¦ä¹ **: ä½¿ç”¨RLä¼˜åŒ–é•¿æœŸç”¨æˆ·ä»·å€¼
5. **è”é‚¦å­¦ä¹ **: ä¿æŠ¤éšç§çš„åˆ†å¸ƒå¼æ¨¡å‹è®­ç»ƒ

